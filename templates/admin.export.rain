<!doctype html>
<html>
<head>
{include="page.head"}
<style>
@media(min-width:768px) { .export-toggle {margin-top: 10px;} }
@media(max-width:767px) { .export-toggle {margin-left: 20px;} }
</style>
</head>
<body>
{include="page.menu"}

<div class="container">
<div class="row">
<div class="col-lg-12">
	<div class="page-header no-espace-top">
		<h2>{$page_title}</h2>
	</div>
	<p>This wizard will export your database into a <strong>JSON file</strong>.
	<br />You can use it as a backup or to import those books elsewhere.</p>
</div>
</div>

<form class="espace-top form-horizontal" method="post" action="{""|Path::export}">
	<div class="form-group no-espace-bottom">
		<label class="control-label col-sm-2 col-md-2 label-checkbox" for="private">Privacy</label>
		<div class="col-md-10 col-sm-10">
			<div class="checkbox">
				<label for="private">
					<input type="checkbox" name="private" id="private" checked="checked" /> Keep my data private
				</label>
				<p class="help-block">It will not export the following information: if you have read the book, the read date, your review and how you rated it.</p>
			</div>
		</div>
	</div>
	<div class="form-group no-espace-top">
		<label class="control-label col-md-2 col-sm-2 label-checkbox" for="images">Book covers</label>
		<div class="col-md-10 col-sm-10">
			<div class="checkbox">
				<label for="images">
					<input type="checkbox" name="images" id="images" /> Export posters
				</label>
				<p class="help-block">Images will be exported in the JSON file as base64 data.
					<br /><span class="text-warning">Note: The file will be a lot bigger! </span></p>
			</div>
		</div>
	</div>

	<div class="form-group books">
		<label class="control-label col-md-2 col-sm-2 label-checkbox export">Books to export</label>
		<div class="col-md-10 col-sm-10">
			{loop="books"}
			<div class="checkbox col-md-6 col-sm-6">
				<label for="book[{$value.id}]"><input type="checkbox" name="book[{$value.id}]" id="book[{$value.id}]" checked="checked"/>{$value.title}</label>
			</div>
			{/loop}
		</div>
	</div>

	<input type="hidden" name="token" value="{$token}" />
	<div class="form-group form-controls">
		<div class="col-md-8  col-sm-8 col-sm-offset-2 col-md-offset-2">
			<button type="submit" class="btn btn-primary" rel="external">Export</button>
			<button type="reset" class="btn btn-default">Reset</button>
		</div>
	</div>
</form>

</div>

{include="page.foot"}
<script>
$(function(){
$('label.export').append('<div class="btn btn-default btn-xs export-toggle">Toggle all</div>');
var checked = true;
function toggleBooks(){ checked = !checked; checkboxes = $('.books input');  for(var i=0, n=checkboxes.length;i<n;i++) {checkboxes[i].checked = checked;} }
$('.export-toggle').click(function(){ toggleBooks(); });
});
</script>
</body>
</html>
