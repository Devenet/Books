<!doctype html>
<html>
<head>
{include="page.head"}
</head>
<body>
{include="page.menu"}

<div class="container">
<div class="row">
  <div class="col-md-12">
	<div class="page-header no-espace-top">
		<h2>{$page_title}</h2>
	</div>
  </div>
</div>
{if="!empty($error)"}
<div class="row">
	<div class="col-md-8 col-md-offset-2">
		<div class="alert alert-danger text-center">
			<strong>Oh damn!</strong> {$error}
		</div>
	</div>
</div>
{/if}
<div class="row">
<form method="post" action="{$target}" enctype="multipart/form-data">
<fieldset>
<div class="col-md-6">
	<div class="form-group">
		<label for="title" class="text-primary">Title</label>
		<input type="text" class="form-control" id="title" name="title" placeholder="Le petit Prince" {if="!empty($inputs['title'])"}value="{$inputs['title']}"{/if} autofocus="autofocus" />
	</div>
  <div class="form-group">
		<label for="original_title" class="text-primary">Author</label>
		<input type="text" class="form-control" id="author" name="author" placeholder="Saint-ExupÃ©ry, Someone else" {if="!empty($inputs['author'])"}value="{$inputs['author']}"{/if}/>
	</div>
  <div class="form-group">
    <label for="summary" class="text-primary">Summary</label>
    <textarea class="form-control" id="summary" name="summary" rows="8" placeholder="The awesome story in a nutshell" >{if="!empty($inputs['summary'])"}{$inputs['summary']}{/if}</textarea>
  </div>
  <div class="form-group">
		<label for="publisher">Publisher</label>
		<input type="text" class="form-control" id="publisher" name="publisher" placeholder="Gallimard" {if="!empty($inputs['publisher'])"}value="{$inputs['publisher']}"{/if}/>
	</div>

	<div class="well espace-top">
	<div class="form-group checkbox no-espace-top no-espace-bottom">
		<label for="status" class="text-primary">
		<input type="checkbox" name="status" id="status" {if="!empty($inputs['status'])"}checked="checked"{/if}/> I have read it
		</label>
	</div>
  <div class="group-read espace-top">
  	<div class="form-group">
  		<label for="note">Rating (ouf of 5)</label>
  		<input type="number" class="form-control slider slider-note" id="note" name="note" min="0" max="5" step="1" value="{if="!empty($inputs['note'])"}{$inputs['note']}{else}2{/if}" data-slider-min="0" data-slider-max="5" data-slider-step="1" data-slider-value="{if="!empty($inputs['note'])"}{$inputs['note']}{else}2{/if}" />
  	</div>
    <div class="form-group">
  		<label for="read_date">Read date</label>
      <div class="input-group">
  			<span class="input-group-addon text-muted"><i class="icon-calendar-empty"></i></span>
  			<input type="text" class="form-control datepicker-read" data-date-format="yyyy-mm-dd" data-date="{if="!empty($inputs['read_date'])"}{$inputs['read_date']}{else}{$today}{/if}" data-date-viewmode="years" id="read_date" name="read_date" placeholder="{if="!empty($inputs['read_date'])"}{$inputs['read_date']}{else}{$today}{/if}" {if="!empty($inputs['read_date'])"}value="{$inputs['read_date']}"{/if}/>
  		</div>
    </div>
    <div class="form-group">
  		<label for="review">Review</label>
  		<textarea class="form-control" id="review" name="review" rows="10" placeholder="Your awesome review" >{if="!empty($inputs['review'])"}{$inputs['review']}{/if}</textarea>
  	</div>
  </div>
	</div>
</div>
<div class="col-md-6">
  <div class="form-group">
    <label for="genre">Genre</label>
    <input type="text" class="form-control" id="genre" name="genre" placeholder="Action, Comedy" {if="!empty($inputs['genre'])"}value="{$inputs['genre']}"{/if}/>
  </div>
	<div class="form-group">
		<label for="read_date">Publication year</label>
		<div class="input-group">
			<span class="input-group-addon text-muted"><i class="icon-calendar-empty"></i></span>
			<input type="number" class="form-control " id="publication_year" name="publication_year" step="1"  placeholder="{if="!empty($inputs['publication_year'])"}{$inputs['publication_year']}{else}{$today_year}{/if}" value="{if="!empty($inputs['publication_year'])"}{$inputs['publication_year']}{else}{$today_year}{/if}" />
		</div>
	</div>
  <div class="form-group">
		<label for="pages">Number of pages</label>
		<input type="number" class="form-control" id="pages" name="pages"  min="0" step="1" placeholder="42" value="{if="!empty($inputs['pages'])"}{$inputs['pages']}{/if}" />
	</div>
	<div class="form-group">
		<label for="country">Country</label>
		<select class="form-control" id="country" name="country">
			{$countries}
		</select>
	</div>
	<div class="form-group espace-top-lg">
		<label for="link_website">External information</label>
		<div class="input-group">
			<span class="input-group-addon text-muted">http://</span>
			<input type="text" class="form-control" id="link_website" name="link_website" placeholder="books.com/book/petit-prince.html" {if="!empty($inputs['link_website'])"}value="{$inputs['link_website']}"{/if}/>
		</div>
	</div>
	<div class="form-group">
		<label for="link_image">URL to book cover</label>
		<div class="input-group">
			<span class="input-group-addon text-muted">http://</span>
			<input type="text" class="form-control" id="link_image" name="link_image" placeholder="books.com/images/petit-prince.jpg" {if="!empty($inputs['link_image'])"}value="{$inputs['link_image']}"{/if}/>
		</div>
		<div class="espace-top-sm"><label for="link_image_import" class="normal"><input type="checkbox" name="link_image_import" id="link_image_import" {if="!empty($inputs['link_image_import'])"}checked="checked"{/if}/> Import book cover</label></div>
	</div>
</div>
<div class="clearfix"></div>
<div class="col-md-12">
	<input type="hidden" name="token" value="{$token}" />
	<div class="form-group form-controls">
		<div class="col-md-12">
			<button type="submit" class="btn btn-primary">Save</button>
			<button type="reset" class="btn btn-default">Reset</button>
			{if="!empty($delete)"}
			<a href="{$delete}&amp;token={$token}" class="btn btn-danger pull-right" onclick="return confirmDeleteBook('{$inputs['title']}')">Delete</a>
			{/if}
	</div>
	</div>
</div>
</fieldset>
</form>
</div>
</div>

{include="page.foot"}
<script>
$(function() {
$('input.slider-note').slider({ formater: function(v){return v+' out of 5';} });
$('.datepicker-read').datepicker();
$('select#country option').prepend(function() {return '<span class="flag flag-option flag-'+$(this).val()+'"></span> ';} );
if($('input#status').attr('checked') == undefined) { $('.group-read').slideToggle(0); }
$('input#status').change(function(){ $('.group-read').slideToggle(250); });
});
</script>
</body>
</html>
